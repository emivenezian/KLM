Asunto: Avance Tesis: AnÃ¡lisis Profundo de Modelos Benchmark y Errores Detectados

Estimado Profesor Delgado,

Espero que se encuentre bien. Le escribo para actualizar el progreso de mi tesis y consultar cÃ³mo proceder con los hallazgos que he descubierto. Como me indicÃ³ en nuestra Ãºltima reuniÃ³n, me he sumergido profundamente en cada modelo benchmark para entender quÃ© hace cada uno y verificar su correctitud matemÃ¡tica. Este email reemplaza nuestra reuniÃ³n presencial, asÃ­ que intentarÃ© ser lo mÃ¡s detallada y pedagÃ³gica posible.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1ï¸âƒ£ CONTEXTO: LOS 5 MODELOS BENCHMARK
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para poder comparar nuestro modelo (DelgadoVenezian) de forma justa con los benchmarks existentes, primero necesitaba entender exactamente quÃ© hace cada uno y asegurarme de que estÃ©n correctamente implementados. Los modelos son:

A. ACTUAL (KLM Real)
   â€¢ QuÃ© es: Los datos reales de cÃ³mo KLM cargÃ³ el aviÃ³n en cada vuelo
   â€¢ Fuente: Viene directamente de LoadLocationsSpotfire.csv (campo MacZFW)
   â€¢ No es un modelo: Son resultados histÃ³ricos, no hay cÃ³digo que optimice
   â€¢ PropÃ³sito: Benchmark de referencia - "asÃ­ lo hace KLM actualmente"

B. BASELINE (Sequential)
   â€¢ QuÃ© hace: Enfoque secuencial en 3 etapas separadas
     - Etapa 1: 1D-BPP (asignar Ã­tems a ULDs sin considerar posiciÃ³n)
     - Etapa 2: 3D-BPP (empaquetar fÃ­sicamente en cada ULD)
     - Etapa 3: W&B (asignar ULDs a posiciones para optimizar %MAC)
   â€¢ LÃ³gica: Primero empaca, luego optimiza balance
   â€¢ Ventaja: Simple, modular
   â€¢ Desventaja: No considera W&B durante el empaquetado (subÃ³ptimo)

C. OPTIMIZED_ACTUAL (W&B-focused)
   â€¢ QuÃ© hace: Solo optimiza Weight & Balance (sin re-empaquetar)
   â€¢ Asume: Los ULDs ya vienen armados con los Ã­tems que tenÃ­an en la realidad
   â€¢ Optimiza: Solo la asignaciÃ³n de ULDs a posiciones para maximizar %MAC
   â€¢ Ventaja: Simple, rÃ¡pido
   â€¢ Desventaja: No puede reorganizar Ã­tems entre ULDs

D. MODEL_PUTTAERT
   â€¢ QuÃ© hace: MILP integrado que combina 1D-BPP + W&B simultÃ¡neamente
   â€¢ Idea: Considerar el impacto en %MAC mientras se empaqueta
   â€¢ Base: Modelo de tesis de Puttaert (2024)
   â€¢ Problema: Tiene varios errores de implementaciÃ³n (detallados abajo)

E. BAX_FIXED
   â€¢ QuÃ© hace: Igual que Puttaert PERO fija las posiciones de los BAX containers
   â€¢ RestricciÃ³n adicional (BF1): f[j_BAX, t_actual] = 1
   â€¢ PropÃ³sito: Ver impacto de fijar posiciones BAX vs permitir que el modelo las optimice
   â€¢ CÃ³digo: Esencialmente Puttaert + 1 constraint extra

F. DELGADOVENEZIAN (Nuestro Modelo)
   â€¢ QuÃ© hace: VersiÃ³n corregida y mejorada de Puttaert
   â€¢ Mejoras clave:
     1. CorrecciÃ³n de errores matemÃ¡ticos de Puttaert
     2. CÃ¡lculo %MAC especÃ­fico por tipo de aviÃ³n
     3. Manejo mejorado de carga COL/CRT (temperatura sensible)
     4. PenalizaciÃ³n mejorada de separaciÃ³n de bookings (variables Y y Z)
     5. Manejo explÃ­cito de posiciones superpuestas
     6. Feedback loop para items diferidos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2ï¸âƒ£ METODOLOGÃA: CÃ“MO ANALICÃ‰ LOS MODELOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para asegurar comparabilidad, seguÃ­ este proceso sistemÃ¡tico:

Paso 1: DocumentÃ© completamente nuestro modelo (Model.ipynb) como referencia "correcta"

Paso 2: ComparÃ© constraint por constraint Model.ipynb vs Model_Puttaert.ipynb 
        para identificar quÃ© errores especÃ­ficos habÃ­amos corregido

Paso 3: BusquÃ© esos mismos errores en Baseline, Optimized_Actual, y BAX_Fixed

Paso 4: AdemÃ¡s, busquÃ© activamente otros errores no presentes en la lista inicial

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3ï¸âƒ£ ERRORES ENCONTRADOS: 11 BUGS TOTALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

He encontrado 11 errores distintos distribuidos en los benchmarks. Los clasifico por severidad:

â”€â”€â”€ ğŸ”¥ CRÃTICOS (Afectan Correctitud MatemÃ¡tica) â”€â”€â”€

Bug #1: RESTRICCIONES DE PESO POR COMPARTIMENTO ğŸ”¥
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, Baseline, Optimized_Actual, BAX_Fixed (TODOS)

El Error:
    # âŒ INCORRECTO: Una restricciÃ³n POR POSICIÃ“N
    for t in aircraft.loadlocations_C1:
        m.addConstr(peso_en_t <= aircraft.max_weight_C1)

Si C1 tiene 3 posiciones (11L, 12L, 13L) con lÃ­mite de 5000 kg:
    - Crea 3 restricciones: peso_11L â‰¤ 5000, peso_12L â‰¤ 5000, peso_13L â‰¤ 5000
    - Permite hasta 15,000 kg total en C1 (3 Ã— 5000) - Â¡INCORRECTO!

DeberÃ­a ser:
    # âœ… CORRECTO: Una restricciÃ³n para TODO el compartimento
    m.addConstr(
        quicksum(peso for t in aircraft.loadlocations_C1) <= aircraft.max_weight_C1
    )

Impacto: El modelo permite sobrecargar compartimentos. Esto cambia fundamentalmente 
         la regiÃ³n factible y podrÃ­a generar soluciones inviables en la prÃ¡ctica.

Aplica a: C1, C2, C3, C4, C1+C2, C3+C4 (6 grupos de restricciones por modelo)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #2: RESTRICCIÃ“N DE ASIGNACIÃ“N DE ÃTEMS ğŸ”¥
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, Baseline, BAX_Fixed

El Error:
    # âŒ INCORRECTO: Permite asignar Ã­tems a CUALQUIER ULD (incluso BAX/BUP/T)
    for i in cargo.items:
        m.addConstr(quicksum(p[i.index, j.index] for j in cargo.uld) == 1)

DeberÃ­a ser:
    # âœ… CORRECTO: Solo ULDs regulares pueden llevar Ã­tems de carga
    for i in cargo.items:
        m.addConstr(quicksum(p[i.index, j.index] 
                            for j in cargo.uld if j.isNeitherBAXnorBUPnorT) == 1)

Impacto: La restricciÃ³n fundamental estÃ¡ mal formulada. Aunque otra restricciÃ³n 
         (p[i,j]=0 para BAX) lo previene, es inconsistente tener que depender de eso. 
         La formulaciÃ³n base debe ser correcta.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #10: LÃ“GICA COL/CRT POR POSICIÃ“N EN VEZ DE POR COMPARTIMENTO ğŸ”¥
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, Baseline, Optimized_Actual, BAX_Fixed (TODOS)

El Error:
    # âŒ INCORRECTO: RestricciÃ³n por posiciÃ³n individual
    if aircraft_type in ['772', '77W']:
        for t in aircraft.loadlocations_C1_C2:
            m.addConstr(f[COL_ULD, t] + f[CRT_ULD, t] <= 1)

Problema: Esto dice "no puedes poner COL y CRT en la MISMA posiciÃ³n", pero:
    â€¢ Permite: COL en posiciÃ³n 11L y CRT en posiciÃ³n 12L (ambas en compartimento frontal)
    â€¢ Pero la regla real es: COL y CRT no pueden estar en el MISMO compartimento

DeberÃ­a ser:
    # âœ… CORRECTO: Nivel compartimento con big-M
    COL_front = m.addVar(vtype=GRB.BINARY)  # 1 si hay COL en C1+C2
    CRT_front = m.addVar(vtype=GRB.BINARY)  # 1 si hay CRT en C1+C2
    
    m.addConstr(sum(f[COL_ULDs] en front) <= big_M * COL_front)
    m.addConstr(sum(f[CRT_ULDs] en front) <= big_M * CRT_front)
    m.addConstr(COL_front + CRT_front <= 1)  # ExclusiÃ³n mutua

Impacto: Error lÃ³gico crÃ­tico - permite violar reglas de temperatura de carga 
         farmacÃ©utica.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #3: LÃ“GICA CRT/COL EXCESIVAMENTE COMPLEJA ğŸ”¥
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, BAX_Fixed

El Error:
    â€¢ Crea variables auxiliares para cada combinaciÃ³n (i_COL, i_CRT, j, t)
    â€¢ Complejidad: O(n_COL Ã— n_CRT Ã— n_ULD Ã— n_positions)
    â€¢ LÃ³gica confusa con quicksum(COL_C1_C2 + CRT_C1_C2 for t in ...) == 0

DeberÃ­a ser: La formulaciÃ³n limpia con big-M del Bug #10 (nivel compartimento)

Impacto: Ineficiencia extrema + lÃ³gica poco clara


â”€â”€â”€ âš ï¸ ALTA PRIORIDAD (Afectan Eficiencia/Calidad) â”€â”€â”€

Bug #4: VARIABLE w DE LINEARIZACIÃ“N INNECESARIA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, BAX_Fixed

Crea variable continua w[i,j,t] con 7 restricciones de linearizaciÃ³n cuando se 
puede usar directamente i.weight * z[i,j,t] con solo 3 restricciones.

Impacto: O(n_items Ã— n_ULD Ã— n_positions) variables extras + 7Ã— restricciones 
         extras â†’ tiempos de soluciÃ³n mÃ¡s lentos

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #5: PENALIZACIÃ“N DE SEPARACIÃ“N SUBÃ“PTIMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, Baseline, BAX_Fixed

Usa variable binaria "Â¿estÃ¡ separado?" en vez de contar cuÃ¡ntos ULDs usa cada booking.

Impacto: Menos efectivo para mantener bookings juntos

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #7: BIG-M HARDCODED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert solamente (BAX_Fixed ya lo corrigiÃ³)

M = 100000000000 en vez de M = max(item_weights)

Impacto: Problemas numÃ©ricos potenciales en el solver

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #8: RESTRICCIÃ“N DE PESO POR POSICIÃ“N DIVIDIDA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Puttaert, BAX_Fixed

Crea 2 restricciones separadas (una para Ã­tems, una para ULDs) en vez de combinarlas.

Impacto: 2Ã— restricciones innecesarias

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Bug #11: ÃNDICES DE MULTI-OBJETIVO INCORRECTOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Presente en: Baseline, Optimized_Actual

El Error:
    # Solo 2 objetivos pero usa Ã­ndice 5
    m.setObjectiveN(MAC_obj, index=0, ...)
    m.setObjectiveN(obj4, index=5, ...)  # âŒ DeberÃ­a ser index=1
    
    bax_env = m.getMultiobjEnv(5)  # âŒ ERROR - solo existen Ã­ndices 0-1

Impacto: Posible error en runtime o comportamiento indefinido


â”€â”€â”€ ğŸ“Š PRIORIDAD MEDIA (Diferencias de DiseÃ±o) â”€â”€â”€

Bug #6: JerarquÃ­a de Objetivos Diferente
   Cada modelo tiene estructura de objetivos distinta (diseÃ±o intencional, 
   no error per se)

Bug #9: Conteo de Objetivos No Coincide
   Relacionado con Bug #6 - diferentes nÃºmeros de objetivos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4ï¸âƒ£ MATRIZ COMPLETA DE ERRORES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Bug | DescripciÃ³n              | Putt | Base | OptA | BAX  | Prioridad
â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 #1 â”‚ Peso compartimento      â”‚  âŒ  â”‚  âŒ  â”‚  âŒ  â”‚  âŒ  â”‚ ğŸ”¥ CRÃTICO
 #2 â”‚ AsignaciÃ³n items        â”‚  âŒ  â”‚  âŒ  â”‚ N/A  â”‚  âŒ  â”‚ ğŸ”¥ CRÃTICO
 #3 â”‚ COL/CRT complejo        â”‚  âŒ  â”‚  âœ…  â”‚  âœ…  â”‚  âŒ  â”‚ ğŸ”¥ CRÃTICO
#10 â”‚ COL/CRT por posiciÃ³n    â”‚  âŒ  â”‚  âŒ  â”‚  âŒ  â”‚  âŒ  â”‚ ğŸ”¥ CRÃTICO
 #4 â”‚ Variable w innecesaria  â”‚  âŒ  â”‚  âœ…  â”‚  âœ…  â”‚  âŒ  â”‚ âš ï¸ ALTA
 #5 â”‚ SeparaciÃ³n subÃ³ptima    â”‚  âŒ  â”‚  âŒ  â”‚ N/A  â”‚  âŒ  â”‚ âš ï¸ ALTA
 #7 â”‚ Big-M hardcoded         â”‚  âŒ  â”‚ N/A  â”‚ N/A  â”‚  âœ…  â”‚ âš ï¸ ALTA
 #8 â”‚ Peso posiciÃ³n split     â”‚  âŒ  â”‚  âœ…  â”‚  âœ…  â”‚  âŒ  â”‚ ğŸ“Š MEDIA
#11 â”‚ Ãndice multi-obj        â”‚  âœ…  â”‚  âŒ  â”‚  âŒ  â”‚  âœ…  â”‚ âš ï¸ ALTA
 #6 â”‚ JerarquÃ­a objetivos     â”‚  âŒ  â”‚  âŒ  â”‚  âœ…  â”‚  âŒ  â”‚ ğŸ“Š DISEÃ‘O
 #9 â”‚ Conteo objetivos        â”‚  âš ï¸  â”‚  âœ…  â”‚  âœ…  â”‚  âœ…  â”‚ ğŸ“Š DISEÃ‘O

TOTALES POR MODELO:
â€¢ Puttaert:         8 bugs (4 crÃ­ticos, 4 alta prioridad)
â€¢ Baseline:         4 bugs (3 crÃ­ticos, 1 alta)
â€¢ Optimized_Actual: 3 bugs (2 crÃ­ticos, 1 alta) â† El mÃ¡s limpio
â€¢ BAX_Fixed:        7 bugs (4 crÃ­ticos, 3 alta) â† Hereda de Puttaert
â€¢ DelgadoVenezian:  0 bugs âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
5ï¸âƒ£ EJEMPLO DETALLADO: BUG #1 (El MÃ¡s CrÃ­tico)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PermÃ­tame explicar en detalle el error mÃ¡s grave que encontrÃ©, porque ilustra 
bien la importancia de revisar cada constraint:

CONTEXTO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
Cada aviÃ³n tiene 4 compartimentos de carga (C1, C2, C3, C4), cada uno con un 
lÃ­mite de peso. Por ejemplo:
    â€¢ C1: mÃ¡ximo 5000 kg
    â€¢ C2: mÃ¡ximo 4500 kg
    â€¢ Etc.

LO QUE PUTTAERT (Y LOS DEMÃS) HACEN:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Para compartimento C1 que tiene 3 posiciones (11L, 12L, 13L)
    for t in aircraft.loadlocations_C1:  # â† Loop sobre cada posiciÃ³n
        m.addConstr(
            quicksum(peso en posiciÃ³n t) <= aircraft.max_weight_C1
        )

Esto crea:
    - RestricciÃ³n 1: peso_en_11L â‰¤ 5000 kg
    - RestricciÃ³n 2: peso_en_12L â‰¤ 5000 kg
    - RestricciÃ³n 3: peso_en_13L â‰¤ 5000 kg

PROBLEMA: Â¡Permite hasta 15,000 kg total en C1! Cada posiciÃ³n individual puede 
          tener hasta 5000 kg, cuando 5000 kg es el lÃ­mite del compartimento completo.

LO QUE DEBERÃA HACER (Y QUE NUESTRO MODELO HACE BIEN):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # UNA sola restricciÃ³n para TODO el compartimento
    m.addConstr(
        quicksum(peso en posiciÃ³n t for t in aircraft.loadlocations_C1) 
        <= aircraft.max_weight_C1
    )

Esto crea:
    - RestricciÃ³n Ãºnica: peso_total_C1 â‰¤ 5000 kg âœ“

POR QUÃ‰ IMPORTA:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Seguridad: PodrÃ­a generar configuraciones que violan lÃ­mites estructurales del aviÃ³n
â€¢ Comparabilidad: Los modelos con este bug tienen una regiÃ³n factible artificialmente 
                  mÃ¡s grande
â€¢ Validez: Las soluciones podrÃ­an no ser implementables en la realidad

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
6ï¸âƒ£ VERIFICACIÃ“N: BAX_FIXED = PUTTAERT + BF1
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ConfirmÃ© mediante anÃ¡lisis de cÃ³digo que BAX_Fixed es esencialmente una copia de 
Puttaert con una restricciÃ³n adicional:

CÃ“DIGO ÃšNICO EN BAX_FIXED:
    # BF1: Fijar posiciones BAX a las reales
    for j in cargo.uld:
        if j.isBAX:
            index_position_bax = [t.index for t in aircraft.loadlocations 
                                 if t.location == j.actual_position_bax][0]
            m.addConstr(f[j.index, index_position_bax] == 1)

ERRORES HEREDADOS: BAX_Fixed tiene los mismos 7 bugs que Puttaert (excepto Bug #7 
                   que ya corrigiÃ³: usa Big-M dinÃ¡mico).

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
7ï¸âƒ£ Â¿POR QUÃ‰ ESTOS ERRORES NO SE NOTARON ANTES?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TEORÃA 1: Los modelos aÃºn producen soluciones factibles
    â€¢ Aunque las restricciones estÃ¡n mal formuladas, otras restricciones (como 
      lÃ­mites por posiciÃ³n) pueden parcialmente compensar
    â€¢ Las soluciones son "viables" pero la regiÃ³n factible es incorrecta

TEORÃA 2: Impacto visible solo en casos especÃ­ficos
    â€¢ Con cargas ligeras, nunca se alcanzan los lÃ­mites
    â€¢ Los bugs solo causan problemas con vuelos muy llenos

TEORÃA 3: ComparaciÃ³n relativa aÃºn vÃ¡lida
    â€¢ Si todos tienen el mismo bug, la comparaciÃ³n relativa podrÃ­a mantenerse
    â€¢ Pero esto no justifica dejar errores matemÃ¡ticos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
8ï¸âƒ£ DOCUMENTACIÃ“N CREADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

He generado documentaciÃ³n exhaustiva:

1. CORRECT_MODEL_REFERENCE.md
   â†’ DocumentaciÃ³n completa de nuestro modelo (referencia correcta)

2. KEY_CORRECT_IMPLEMENTATIONS.md
   â†’ Foco en las 3 implementaciones clave correctas

3. COMPLETE_BUG_LIST_PUTTAERT.md
   â†’ 9 bugs encontrados en Puttaert

4. BUGS_IN_BASELINE.md
   â†’ 4 bugs en Baseline

5. BUGS_IN_OPTIMIZED_ACTUAL.md
   â†’ 3 bugs en Optimized_Actual

6. BUGS_IN_BAX_FIXED.md
   â†’ 7 bugs en BAX_Fixed

7. MASTER_BUG_MATRIX.md
   â†’ Matriz completa de bugs por modelo

AdemÃ¡s, todos los modelos .ipynb y .tex ahora tienen:
    â€¢ Comentarios numerados (DV#, O#, R#, P#, W#) en el cÃ³digo
    â€¢ Tags \tag{} correspondientes en las ecuaciones LaTeX
    â€¢ Trazabilidad perfecta cÃ³digo â†” matemÃ¡tica

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
9ï¸âƒ£ PLAN DE CORRECCIÃ“N PROPUESTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPCIÃ“N 2: CORREGIR TODOS LOS BUGS â† MI RECOMENDACIÃ“N

RazÃ³n: Para tener una comparaciÃ³n justa "manzanas con manzanas", todos los 
       modelos deben:
    â€¢ Estar matemÃ¡ticamente correctos
    â€¢ Usar la misma lÃ³gica eficiente donde aplicable
    â€¢ Permitir comparaciÃ³n de performance real

MODELOS A CORREGIR:
    1. Baseline.ipynb (4 bugs)
    2. Optimized_Actual.ipynb (3 bugs)
    3. BAX_Fixed.ipynb (7 bugs)

NO CORREGIR: Model_Puttaert.ipynb (decidimos no incluirlo en comparaciÃ³n final)

MÃ‰TODO DE CORRECCIÃ“N:
    â€¢ Fixes in-place en los notebooks existentes (no crear versiones duplicadas)
    â€¢ Documentar cada cambio detalladamente en logs
    â€¢ Verificar sintaxis despuÃ©s de cada fix
    â€¢ Testear que los modelos aÃºn corren

ORDEN DE CORRECCIÃ“N:

    Fase A - CRÃTICOS (Correctitud):
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    1. Bug #1: Compartimento weights (todos)
    2. Bug #2: Item assignment (Baseline, BAX_Fixed)
    3. Bug #10: COL/CRT compartimento (todos)
    4. Bug #3: COL/CRT simplificar (BAX_Fixed)
    
    Fase B - ALTA PRIORIDAD (Eficiencia):
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    5. Bug #11: Multi-obj Ã­ndices (Baseline, Optimized_Actual)
    6. Bug #4: Eliminar variable w (BAX_Fixed)
    7. Bug #5: SeparaciÃ³n penalty (Baseline, BAX_Fixed)
    8. Bug #8: Combinar peso posiciÃ³n (BAX_Fixed)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”Ÿ PREGUNTAS PARA USTED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

A. SOBRE LA ESTRATEGIA DE CORRECCIÃ“N:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Â¿EstÃ¡ de acuerdo con corregir TODOS los bugs (no solo los crÃ­ticos) para 
   tener mÃ¡xima comparabilidad?

2. Â¿Prefiere que corrija directamente los notebooks existentes, o que cree 
   versiones "_corrected"?

3. Â¿Hay algÃºn bug que prefiera NO corregir para preservar la lÃ³gica original 
   del benchmark?


B. SOBRE INCLUSIÃ“N DE MODELOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

4. ConfirmÃ© que BAX_Fixed = Puttaert + BF1. Â¿Tiene sentido incluir ambos en la 
   comparaciÃ³n final, o solo BAX_Fixed?

5. Â¿DeberÃ­a incluir Model_Puttaert en la comparaciÃ³n (con bugs documentados) 
   como "versiÃ³n original" vs nuestra versiÃ³n corregida?


C. SOBRE PRÃ“XIMOS PASOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DespuÃ©s de corregir los bugs, podemos continuar con:

OPCIÃ“N A: HeurÃ­sticas
    â€¢ Analizar y potencialmente mejorar las heurÃ­sticas de 3D-BPP (extreme points)
    â€¢ Revisar lÃ³gica de feedback loop
    â€¢ Optimizar criterios de "item diferido"

OPCIÃ“N B: Infeasibilities
    â€¢ Investigar causas de infactibilidades cuando ocurren
    â€¢ Mejorar manejo de casos extremos
    â€¢ Fortalecer lÃ³gica de reopening ULDs

OPCIÃ“N C: Ejecutar CÃ³digo Corregido
    â€¢ Correr los modelos corregidos en el conjunto de 102 vuelos
    â€¢ Comparar resultados antes/despuÃ©s de las correcciones
    â€¢ Analizar si los bugs afectaban significativamente los resultados

6. Â¿CuÃ¡l de estas opciones prefiere abordar primero?

7. Â¿O prefiere que corrija todos los bugs primero y luego decidamos el siguiente 
   paso basado en los resultados?


D. SOBRE DOCUMENTACIÃ“N PARA LA TESIS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

8. Â¿DeberÃ­a incluir en la tesis una secciÃ³n sobre "Errores detectados y 
   corregidos en modelos benchmark" para transparencia metodolÃ³gica?

9. Â¿Los fixes aplicados ameritan reconocimiento en contribuciones 
   (ej: "se identificaron y corrigieron X errores en los modelos de referencia 
   para asegurar comparabilidad")?

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ MI RECOMENDACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

BasÃ¡ndome en lo que he encontrado, sugiero:

PASO 1: Corregir todos los bugs crÃ­ticos (#1, #2, #3, #10) en los 3 benchmarks
        â†’ Asegura correctitud matemÃ¡tica
        â†’ ~2-3 horas de trabajo cuidadoso

PASO 2: Corregir bugs de alta prioridad (#4, #5, #7, #8, #11)
        â†’ Asegura eficiencia y comparabilidad justa
        â†’ ~1-2 horas adicionales

PASO 3: Ejecutar modelos corregidos en subconjunto de vuelos (ej: 10 vuelos)
        â†’ Verificar que las correcciones no rompan nada
        â†’ Ver si los resultados cambian significativamente

PASO 4: DecisiÃ³n basada en resultados
        â†’ Si bugs afectan mucho â†’ documentar en tesis
        â†’ Si bugs no afectan â†’ proceder con anÃ¡lisis completo

PASO 5: AnÃ¡lisis completo de 102 vuelos con benchmarks corregidos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š ARCHIVOS DE DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Adjunto la documentaciÃ³n completa para su revisiÃ³n:
    â€¢ MASTER_BUG_MATRIX.md - Tabla resumen de todos los bugs
    â€¢ CORRECT_MODEL_REFERENCE.md - Referencia de nuestro modelo correcto
    â€¢ Archivos individuales de bugs por modelo

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Quedo atenta a sus comentarios y orientaciÃ³n sobre cÃ³mo proceder. Esta revisiÃ³n 
profunda ha revelado mÃ¡s de lo que anticipaba, y quiero asegurarme de que 
tomamos la decisiÃ³n correcta sobre quÃ© corregir y cÃ³mo documentarlo.

Muchas gracias por su guÃ­a constante.

Saludos cordiales,

MarÃ­a Emilia Venezian Juricic
Estudiante de IngenierÃ­a Civil Industrial
Pontificia Universidad CatÃ³lica de Chile

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

P.D.: Todos los archivos estÃ¡n en la carpeta del proyecto con documentaciÃ³n 
      detallada. Si necesita que profundice en algÃºn bug especÃ­fico o quiere 
      discutir algÃºn aspecto tÃ©cnico, estoy disponible.
