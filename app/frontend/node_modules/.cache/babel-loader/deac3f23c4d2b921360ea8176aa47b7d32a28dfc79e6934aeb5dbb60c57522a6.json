{"ast":null,"code":"import React,{useState,useEffect}from'react';import{optimizationAPI}from'../services/api';import FlightSelector from'./FlightSelector';import OptimizationControls from'./OptimizationControls';import ResultsVisualization from'./ResultsVisualization';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{const[flights,setFlights]=useState([]);const[selectedFlight,setSelectedFlight]=useState('');const[result,setResult]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);useEffect(()=>{loadFlights();},[]);const loadFlights=async()=>{try{const flightList=await optimizationAPI.listFlights();setFlights(flightList);if(flightList.length>0){setSelectedFlight(flightList[0]);}}catch(err){setError(\"Failed to load flights: \".concat(err.message));}};const runOptimization=async request=>{setLoading(true);setError(null);setResult(null);try{const optimizationResult=await optimizationAPI.run(request);setResult(optimizationResult);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||\"Optimization failed: \".concat(err.message));}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsx(FlightSelector,{flights:flights,selectedFlight:selectedFlight,onSelectFlight:setSelectedFlight,onRefresh:loadFlights}),/*#__PURE__*/_jsx(OptimizationControls,{selectedFlight:selectedFlight,onRun:runOptimization,loading:loading}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"error\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Error:\"}),\" \",error]}),result&&/*#__PURE__*/_jsx(ResultsVisualization,{result:result})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","optimizationAPI","FlightSelector","OptimizationControls","ResultsVisualization","jsx","_jsx","jsxs","_jsxs","Dashboard","flights","setFlights","selectedFlight","setSelectedFlight","result","setResult","loading","setLoading","error","setError","loadFlights","flightList","listFlights","length","err","concat","message","runOptimization","request","optimizationResult","run","_err$response","_err$response$data","response","data","detail","className","children","onSelectFlight","onRefresh","onRun"],"sources":["/Users/emivenezian/Desktop/universidad/ingeniera/anÌƒos/cuarto/Segundo Semestre/AviationOptimization/KLM_Projects/KLM_Modified/app/frontend/src/components/Dashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { optimizationAPI, OptimizationResult, OptimizationRequest } from '../services/api';\nimport FlightSelector from './FlightSelector';\nimport OptimizationControls from './OptimizationControls';\nimport ResultsVisualization from './ResultsVisualization';\nimport './Dashboard.css';\n\nconst Dashboard: React.FC = () => {\n  const [flights, setFlights] = useState<string[]>([]);\n  const [selectedFlight, setSelectedFlight] = useState<string>('');\n  const [result, setResult] = useState<OptimizationResult | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadFlights();\n  }, []);\n\n  const loadFlights = async () => {\n    try {\n      const flightList = await optimizationAPI.listFlights();\n      setFlights(flightList);\n      if (flightList.length > 0) {\n        setSelectedFlight(flightList[0]);\n      }\n    } catch (err: any) {\n      setError(`Failed to load flights: ${err.message}`);\n    }\n  };\n\n  const runOptimization = async (request: OptimizationRequest) => {\n    setLoading(true);\n    setError(null);\n    setResult(null);\n\n    try {\n      const optimizationResult = await optimizationAPI.run(request);\n      setResult(optimizationResult);\n    } catch (err: any) {\n      setError(err.response?.data?.detail || `Optimization failed: ${err.message}`);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"main-content\">\n      <FlightSelector\n        flights={flights}\n        selectedFlight={selectedFlight}\n        onSelectFlight={setSelectedFlight}\n        onRefresh={loadFlights}\n      />\n\n      <OptimizationControls\n        selectedFlight={selectedFlight}\n        onRun={runOptimization}\n        loading={loading}\n      />\n\n      {error && (\n        <div className=\"error\">\n          <strong>Error:</strong> {error}\n        </div>\n      )}\n\n      {result && (\n        <ResultsVisualization result={result} />\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}